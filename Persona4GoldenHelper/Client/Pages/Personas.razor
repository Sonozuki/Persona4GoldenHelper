@page "/personas"
@inject HttpClient Http;

<div class="content-normal">
    <h1>Personas</h1>
    <table>
        <thead>
            <tr>
                <th class="column-very-slim text-align-centre">Level</th>
                <th>Name</th>
                <th>Arcana</th>
                <th class="column-very-slim text-align-centre">St</th>
                <th class="column-very-slim text-align-centre">Mg</th>
                <th class="column-very-slim text-align-centre">En</th>
                <th class="column-very-slim text-align-centre">Ag</th>
                <th class="column-very-slim text-align-centre">Lu</th>
                <th class="column-very-slim text-align-centre"><img src="images/physical.png" alt="Physical" /></th>
                <th class="column-very-slim text-align-centre"><img src="images/fire.png" alt="Fire" /></th>
                <th class="column-very-slim text-align-centre"><img src="images/ice.png" alt="Ice" /></th>
                <th class="column-very-slim text-align-centre"><img src="images/electricity.png" alt="Electric" /></th>
                <th class="column-very-slim text-align-centre"><img src="images/wind.png" alt="Wind" /></th>
                <th class="column-very-slim text-align-centre"><img src="images/light.png" alt="Light" /></th>
                <th class="column-very-slim text-align-centre"><img src="images/darkness.png" alt="Dark" /></th>
            </tr>
        </thead>
        <tbody>
            @if (AllPersonas != null)
                foreach (var persona in AllPersonas)
                {
                    <tr class="alternate-colour">
                        <td class="text-secondary text-align-centre">@persona.Level</td>
                        <td><a class="@(persona.IsUltimate ? "persona-type-ultimate" : persona.IsNewGamePlus ? "persona-type-new-game" : "")" href="/personas/@persona.Name">@persona.Name</a></td>
                        <td class="text-secondary">@persona.Arcana</td>
                        <td class="text-secondary text-align-centre">@persona.Stats.Strength</td>
                        <td class="text-secondary text-align-centre">@persona.Stats.Magic</td>
                        <td class="text-secondary text-align-centre">@persona.Stats.Endurance</td>
                        <td class="text-secondary text-align-centre">@persona.Stats.Agility</td>
                        <td class="text-secondary text-align-centre">@persona.Stats.Luck</td>
                        <td class="text-secondary text-align-centre font-bold affinity-@persona.ElementAffinities.Physical">@Utilities.ConvertElementAffinityToShortHand(persona.ElementAffinities.Physical)</td>
                        <td class="text-secondary text-align-centre font-bold affinity-@persona.ElementAffinities.Fire">@Utilities.ConvertElementAffinityToShortHand(persona.ElementAffinities.Fire)</td>
                        <td class="text-secondary text-align-centre font-bold affinity-@persona.ElementAffinities.Ice">@Utilities.ConvertElementAffinityToShortHand(persona.ElementAffinities.Ice)</td>
                        <td class="text-secondary text-align-centre font-bold affinity-@persona.ElementAffinities.Electricity">@Utilities.ConvertElementAffinityToShortHand(persona.ElementAffinities.Electricity)</td>
                        <td class="text-secondary text-align-centre font-bold affinity-@persona.ElementAffinities.Wind">@Utilities.ConvertElementAffinityToShortHand(persona.ElementAffinities.Wind)</td>
                        <td class="text-secondary text-align-centre font-bold affinity-@persona.ElementAffinities.Light">@Utilities.ConvertElementAffinityToShortHand(persona.ElementAffinities.Light)</td>
                        <td class="text-secondary text-align-centre font-bold affinity-@persona.ElementAffinities.Darkness">@Utilities.ConvertElementAffinityToShortHand(persona.ElementAffinities.Darkness)</td>
                    </tr>
                }
        </tbody>
    </table>
</div>

@code {
    /*********
    ** Accessors
    *********/
    /// <summary>All the personas to display.</summary>
    public List<Persona> AllPersonas { get; private set; }


    /*********
    ** Protected Methods
    *********/
    /// <inheritdoc/>
    protected override async Task OnInitializedAsync() => AllPersonas = await Http.GetFromJsonAsync<List<Persona>>("api/GetAllPersonas");
}